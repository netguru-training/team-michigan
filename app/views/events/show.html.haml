%h1
  = event.name
%h3
  = event.description
%table
  %tr
    %th= t('Place:')
  %tr
    %td= event.place
  %tr
    %th= t('Date:')
  %tr
    %td= event.start_time
  %tr
    %th= t('Request deadline:')
  %tr
    %td= event.user_deadline
  %tr
    %th= t('Empty slots:')
  %tr
    %td= event.slots

-if user_signed_in?
  = link_to 'Request for Event', requests_path(event: event), class: "btn btn-success", method: :post
- else
  %h3 Log in to join evet!

- if user_signed_in? && current_user == event.user
  %h1 Requests List
  %br

    .row
      .col-md-6
        %h3 Pending requests
        %table.table.table-condensed
          %thead
            %tr
              %th= 'User'
              %th
              %th
          %tbody
            -event.requests.pending.each do |request|
              %tr
                %td= request.user.email
                %td= link_to 'Accept', '#', class: 'btn btn-info'
                %td= link_to 'Reject', '#', class: 'btn btn-danger'
      .col-md-3
        %h3 Accepted requests
        %table.table.table-condensed
          %thead
            %tr
              %th= 'User'
              %th= 'User'
          %tbody
            -event.requests.accepted.each do |request|
              %tr
                %td= request.user.email
                %td= link_to 'Add note', '#', class: 'btn btn-danger'
      .col-md-3
        %h3 Rejected requests
        %table.table.table-condensed
          %thead
            %tr
              %th= 'User'
          %tbody
            -event.requests.rejected.each do |request|
              %tr
                %td= request.user.email
